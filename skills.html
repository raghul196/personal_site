<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Scientist | Energy, Climate & Sustainability</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>


    </style>
</head>

<body class="text-white h-screen flex flex-col bg-black font-sans">
    
    <!-- Header -->
  <header class="fixed top-0 h-16 left-0 w-full z-50 bg-opacity-80 backdrop-blur-md text-white shadow-md">
    <div class="container mx-auto px-6 py-4 flex justify-between items-center" id="header">
      <h1 class="text-2xl font-bold">Raghul Babu</h1>
      <nav class="space-x-6">
        <a href="./index.html" class="hover:text-green-300 transition">Home</a>
        <a href="./index.html#aboutSection" class="hover:text-green-300 transition">About</a>
        <a href="./index.html#projectsSection" class="hover:text-green-300 transition">Projects</a>
        <a href="./index.html#skillsSection" class="hover:text-green-300 transition">Skills</a>
        <a href="./index.html#contactSection" class="hover:text-green-300 transition">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="pt-16 pb-16 flex-1 mx-auto min-h-[700px]">
    <div class="p-4 grid flex justify-center grid-cols-[25%_25%_45%] h-[calc(100vh-10rem)]  gap-4">
      
      <!-- Skill Grid -->
      <div  class="text-center flex flex-wrap items-start justify-center border rounded-lg h-[calc(100vh-10rem)] shadow ">
        <div class = "text-center flex justify-center items-center font-sans w-full h-12 text-lg text-black bg-gray-300 border">Available Skills</div>
        <div id="skillGrid" class="text-center flex flex-wrap items-start justify-center h-[calc(100vh-14rem)] shadow gap-4 overflow-y-auto p-2">

        </div>
      </div>

      <!-- Drop + Score + Expected -->
      <div id="skillDragOver" class="grid grid-cols-[20%_40%_40%] rounded-lg h-[calc(100vh-10rem)] w-full overflow-y-auto border rounded-md">
        
        <!-- Drop Zone with icons -->
        <div class="w-full h-[calc(100vh-10rem)] flex flex-col text-center items-center justify-start">
          <div class = "sticky top-0 z-10 flex justify-center items-center font-sans w-full h-12 text-lg text-black bg-gray-300 border">Expected Skills</div>
          <div id="dropZone" class="w-full p-4 gap-4 h-[calc(100vh-14rem)] flex flex-col text-center items-center justify-start">

          </div>
        
        </div>

        <div class="w-full h-[calc(100vh-10rem)] flex flex-col text-center items-center justify-start">
          <div class = "sticky top-0 z-10 text-center justify-center items-center font-sans w-full h-12 text-lg text-black bg-gray-300 border">Expected Skills</div>
          <div id="dropZoneName" class="w-full p-4 gap-4 h-[calc(100vh-14rem)] flex flex-col text-center items-center justify-start">

          </div>
        </div>
        <!-- Expected Score -->
        <div class="w-full h-[calc(100vh-10rem)] flex flex-col text-center items-center justify-start">
          <div class = "sticky top-0 z-10 text-center flex justify-center items-center font-sans w-full h-12 text-lg text-black bg-gray-300 border">Expected Proficiency</div>
          <div id="expectedScore" class="w-full h-[calc(100vh-14rem)] flex flex-col text-black  items-center justify-start gap-4 p-4">
            
          </div>
      </div>
      </div>

      <!-- Radar -->
      <div id="skillRadar" class = "w-full h-[calc(100vh-10rem)] border rounded-lg flex flex-col text-center items-center">
        <div class = "text-center flex justify-center items-center font-sans w-full h-12 text-lg text-black bg-gray-300 border">Compatability</div>
        <div class="w-full h-[calc(100vh-14rem)] flex items-center justify-center p-4">
          <canvas id="radarChart" class="w-full h-full"></canvas>
        </div>
      </div>

    </div>
  </main>

  <!-- Footer -->
  <footer class="fixed bottom-0 w-full h-16 text-white text-center py-4 z-50">
    <p>&copy; 2025 Raghul Babu. All rights reserved.</p>
  </footer>

    <script>
      const iconStaticPath = "static/icon_images/";
      const iconIdSources= {
          english: {
              name: "English",
              description: "ML library for classical algorithms. ML library for classical algorithms.",
              score: 9.5,
              source: "div"
          },
          german: {
              name: "German",
              description: "ML library for classical algorithms.",
              score: 9,
              source: "div"
          },
          tamil: {
              name: "Tamil",
              description: "ML library for classical algorithms.",
              score: 7,
              source: "div"
          },
          spanish: {
              name: "Spanish",
              description: "ML library for classical algorithms.",
              score: 7,
              source: "div"
          },
          python: {
              name: "Python",
              description: "ML library for classical algorithms. ML library for classical algorithms.",
              score: 9.5,
              source: iconStaticPath + "python_icon.svg"
          },
          vba: {
              name: "Excel - VBA",
              description: "ML library for classical algorithms.",
              score: 9,
              source: "static/icon_images/vba_icon.jpg"
          },
          php: {
              name: "PHP",
              description: "ML library for classical algorithms.",
              score: 7,
              source: iconStaticPath + "php_icon.svg"
          },
          js: {
              name: "Javascript",
              description: "ML library for classical algorithms.",
              score: 7,
              source: iconStaticPath + "js_icon.svg"
          },
          scikit: {
              name: "Scikit-learn",
              description: "ML library for classical algorithms. ML library for classical algorithms.",
              score: 9,
              source: iconStaticPath + "scikit_icon.svg"
          },
          pytorch: {
              name: "Pytorch",
              description: "ML library for classical algorithms.",
              score: 9,
              source: iconStaticPath + "pytorch_icon.svg"
          },
          tensorflow: {
              name: "Tensorflow",
              description: "ML library for classical algorithms.",
              score: 7,
              source: iconStaticPath + "tensorflow_icon.svg"
          },
          keras: {
              name: "Keras",
              description: "ML library for classical algorithms.",
              score: 7,
              source: iconStaticPath + "keras_icon.svg"
          },
          sql: {
              name: "SQL",
              description: "ML library for classical algorithms. ML library for classical algorithms.",
              score: 9,
              source: iconStaticPath + "sql_icon.svg"
          },
          aws: {
              name: "AWS",
              description: "ML library for classical algorithms.",
              score: 7,
              source: iconStaticPath + "aws_icon.svg"
          },
          snowflake: {
              name: "Snowflake",
              description: "ML library for classical algorithms.",
              score: 7,
              source: "static/icon_images/snowflake_icon.png"
          },
          docker: {
              name: "Docker",
              description: "ML library for classical algorithms.",
              score: 8,
              source: iconStaticPath + "docker_icon.svg"
          },
          transformer: {
              name: "Transformers",
              description: "ML library for classical algorithms. ML library for classical algorithms.",
              score: 9,
              source: "div"
          },
          nn: {
              name: "Neural Networks",
              description: "ML library for classical algorithms.",
              score: 9,
              source: "div"
          },
          xgboost: {
              name: "XG - Boost",
              description: "ML library for classical algorithms.",
              score: 9,
              source: "div"
          },
          lstm: {
              name: "LSTM",
              description: "ML library for classical algorithms.",
              score: 9,
              source: "div"
          },
          sap: {
              name: "SAP",
              description: "ML library for classical algorithms.",
              score: 8,
              source: "static/icon_images/sap_icon.png"
          },
          git: {
              name: "Git",
              description: "ML library for classical algorithms. ML library for classical algorithms.",
              score: 9,
              source: iconStaticPath + "git_icon.svg"
          },
          html: {
              name: "HTML 5",
              description: "ML library for classical algorithms.",
              score: 9,
              source: iconStaticPath + "html_icon.svg"
          },
          css: {
              name: "CSS 3",
              description: "ML library for classical algorithms.",
              score: 9,
              source: iconStaticPath + "css_icon.svg"
          },
          flask: {
              name: "Flask",
              description: "ML library for classical algorithms.",
              score: 9,
              source: iconStaticPath + "flask_icon.svg"
          },
          django: {
              name: "Django",
              description: "ML library for classical algorithms.",
              score: 7,
              source: iconStaticPath + "django_icon.svg"
          },
          langchain: {
              name: "Langchain",
              description: "ML library for classical algorithms.",
              score: 8,
              source: iconStaticPath + "langchain_icon.svg"
          },
          ollama: {
              name: "Ollama",
              description: "ML library for classical algorithms. ML library for classical algorithms.",
              score: 9,
              source: iconStaticPath + "ollama_icon.svg"
          },
          langflow: {
              name: "Langflow",
              description: "ML library for classical algorithms.",
              score: 9,
              source: iconStaticPath + "langflow_icon.svg"
          },
          n8n: {
              name: "n8n",
              description: "ML library for classical algorithms.",
              score: 9,
              source: iconStaticPath + "n8n_icon.svg"
          },
          linux: {
              name: "Linux",
              description: "ML library for classical algorithms.",
              score: 9,
              source: iconStaticPath + "linux_icon.svg"
          },
          raspberrypi: {
              name: "Raspberrypi",
              description: "ML library for classical algorithms.",
              score: 7,
              source: iconStaticPath + "raspberrypi_icon.svg"
          },
          powershell: {
              name: "Powershell",
              description: "ML library for classical algorithms.",
              score: 9,
              source: iconStaticPath + "powershell_icon.svg"
          },
          arduino: {
              name: "Arduino",
              description: "ML library for classical algorithms.",
              score: 7,
              source: iconStaticPath + "arduino_icon.svg"
          },    
      };

      const skillGrid = document.getElementById("skillGrid");
      const skillDragOver = document.getElementById("skillDragOver");
      const dropZone = document.getElementById("dropZone");
      const dropZoneName = document.getElementById("dropZoneName");
      const raghulScore = document.getElementById("raghulScore");
      const expectedScore = document.getElementById("expectedScore")


      Object.entries(iconIdSources).forEach(([id, {name, description, score, source}]) => {
        if (source == "div"){
          const mainDiv = document.createElement("div");
          const textDiv = document.createElement("div");

          textDiv.textContent = name;
          textDiv.classList.add(
            'text-center',
            'whitespace-normal',
            'w-full',
            'h-full',
            'flex',
            'items-center',
            'justify-center',
            
          );
          textDiv.style.overflowWrap = 'break-word';
          textDiv.style.wordBreak = 'break-word';

          mainDiv.id = id;
          mainDiv.draggable = true;

          mainDiv.classList.add(
            'w-16',
            'h-16',
            'rounded-lg',
            'bg-white',
            'text-black',
            'hover:scale-110',
            'text-sm',
            'border-2',
            'border-gray-400',
            'hover:bg-gray-100',
            'hover:border-gray-500',
            'group',
            'relative',
            'transition-colors',
            'transition-transform',
            'shadow-md',
            'flex',           // Add this to enable flex layout
            'items-center',   // Vertical centering
            'justify-center', // Horizontal centering
            'p-1', 
            'text-center'
          );

          mainDiv.appendChild(textDiv);
          skillGrid.appendChild(mainDiv);

        } 
        else{
          const img = document.createElement("img");
          img.src = source;
          img.id = id;
          img.classList.add('w-16',
                    'h-16',
                    'rounded-lg',
                    'bg-white',
                    'hover:scale-110',
                    'transition-transform',
                    'shadow-md',
                    'border-2',
                    'border-gray-400',);
          skillGrid.appendChild(img)

        } 
      });


      const params = new URLSearchParams(window.location.search);
      const droppedIconIdsArr = JSON.parse(params.get("droppedIconIds"));
      
      let radarChart ;
      
      
      function addSkillsToDragOver(droppedIconId){
        const source = iconIdSources[droppedIconId].source;
        const name = iconIdSources[droppedIconId].name;
        const score = iconIdSources[droppedIconId].score;
        

        if (source == "div"){
            const mainDiv = document.createElement("div");
            const textDiv = document.createElement("div");

            textDiv.textContent = name;
            textDiv.classList.add(
                'text-center',
                'whitespace-normal',
                'w-14',
                'h-14',
                'items-center',
                'justify-center',
                'flex'
                
                
            );
            textDiv.style.overflowWrap = 'break-word';
            textDiv.style.wordBreak = 'break-word';

            mainDiv.id = "dropped-" + droppedIconId;
            mainDiv.draggable = true;

            mainDiv.classList.add(
              'w-14',
              'h-14',
              'min-h-14',
              'rounded-lg',
              'bg-white',
              'text-black',
              'hover:scale-110',
              'text-[12px]',
              'border-2',
              'border-gray-400',
              'hover:bg-gray-100',
              'hover:border-gray-500',
              'group',
              'relative',
              'transition-colors',
              'transition-transform',
              'shadow-md',
              'flex',           // Add this to enable flex layout
              'items-center',   // Vertical centering
              'justify-center', // Horizontal centering
              'p-1', 
              'm-1',
              'text-center'
            );

            mainDiv.appendChild(textDiv);
            dropZone.appendChild(mainDiv);

            } 
            else{
                const img = document.createElement("img");
                img.src = source;
                img.id = "dropped-" + droppedIconId;
                img.classList.add('w-14',       // width: 3.5rem (roughly 56px, close to 50px)
                    'h-14',       // height: 3.5rem (roughly 56px, close to 50px)
                    'rounded-full', // borderRadius: 50%
                    'bg-white',     // backgroundColor: white
                    'p-1',         // padding: 0.25rem (roughly 4px, close to 5px)
                    'm-1',         // margin: 0.25rem (roughly 4px, close to 5px)
                    'object-contain', // objectFit: contain
                    'min-h-14',
                    'min-w-14'
                  );
                dropZone.appendChild(img)

            }

        const expectedScoreDiv = document.createElement("div");
        expectedScoreDiv.classList.add('h-16','flex','min-h-16','items-center','justify-center');
        expectedScoreDiv.innerHTML = `<input type="number" value = 5 id = "${droppedIconId}ExpectedScore" class="border items-center justify-center h-8 rounded px-2 py-1 w-16 max-w-full" />`;
        expectedScore.appendChild(expectedScoreDiv);

        const dropZoneNameDiv = document.createElement("div");
        dropZoneNameDiv.classList.add('h-16','flex', 'items-center','justify-center');
        dropZoneNameDiv.innerHTML = `<p class="words-break flex items-center justify-center h-16 rounded px-2 py-1 w-16 max-w-full">${iconIdSources[droppedIconId].name}</p>`;
        dropZoneName.appendChild(dropZoneNameDiv);
        
      };

      droppedIconIdsArr.forEach(droppedIconId =>{
          addSkillsToDragOver(droppedIconId); 
                     
      });

      
      updateRadarChart();
      bindExpectedScores();
      
      function bindExpectedScores(){
        const expectedScoreFields = document.querySelectorAll('#expectedScore input');
        expectedScoreFields.forEach(expectedScoreField => {
        expectedScoreField.addEventListener('input', () => {
            updateRadarChart();
          });
        });
      }

      function updateRadarChart(){
        const droppedIconScores = [];
        const droppedIconLabels = [];
        const droppedIconExpectedScores = [];
        droppedIconIdsArr.forEach(droppedIconId =>{
          const score = iconIdSources[droppedIconId].score;
          const label = iconIdSources[droppedIconId].name; 
          const expectedScore = document.getElementById(droppedIconId + 'ExpectedScore').value;         
          droppedIconScores.push(score);
          droppedIconLabels.push(label);
          droppedIconExpectedScores.push(expectedScore);

        });
        
            const ctx = document.getElementById('radarChart').getContext('2d');                     
            if (radarChart) {
                radarChart.destroy(); 
            }
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: droppedIconLabels, 
                    datasets: [{
                        label: "Raghul's Skills", 
                        data: droppedIconScores, 
                        backgroundColor: 'rgba(255, 99, 132, 0.2)', 
                        borderColor: 'rgb(255, 255, 255)', 
                        borderWidth: 2 
                        
                    },
                    {
                        label: "Expected Skill", 
                        data: droppedIconExpectedScores, 
                        backgroundColor: 'rgba(255, 250, 0, 0.2)', 
                        borderColor: 'rgb(255, 255, 255)', 
                        borderWidth: 2 
                        
                    }]
                    
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true, // Start the scale from zero
                            grid: {
                                color: 'rgba(220, 220, 220, 0.8)' // Light gray grid lines
                            },
                            pointLabels: {
                                font: {
                                    size: 14, // Increased font size
                                },
                                color: '#ffffff' // White label color
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'  // Color of the legend
                            }
                        }
                    }

                }
            });
        };

      const icons = document.querySelectorAll('#skillGrid img, #skillGrid div[draggable="true"]');
      var dropZoneIcons;
      let draggedIcon = null;
      
      let defaultTextRemoved = false;  

      // When you start dragging an icon
      icons.forEach(icon => {
      icon.addEventListener('dragstart', (event) => {
          draggedIcon = event.target; // Store the icon that's being dragged
      });
      });

      // When something is dragged over the drop zone
      skillDragOver.addEventListener('dragover', (event) => {
      event.preventDefault(); // This is important to allow dropping!
      // You can add some visual feedback here, like changing the border color
      });

      // When you drop something onto the drop zone
      skillDragOver.addEventListener('drop', (event) => {
        event.preventDefault(); // Prevent default browser behavior
        if (draggedIcon) {
            console.log(draggedIcon.id , ' dropped into the dropzone'); 

            // Check if the icon has already been dropped
            if (droppedIconIdsArr.includes(draggedIcon.id)) {
                console.log('Icon already dropped:', draggedIcon.id);
                return; // Don't drop it again
            }
           
            addSkillsToDragOver(draggedIcon.id);
              
            // Store the ID of the dropped icon
            droppedIconIdsArr.push(draggedIcon.id);
            updateRadarChart();
            bindExpectedScores();

            
            draggedIcon = null; // Reset draggedIcon
            // bindDropZoneIconListeners();
          
        }
      });

    </script>

    
</body>
</html>